/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{121:function(e,t,r){"use strict";var n=function(e,t=!0){const r=t&&e.headers?e.headers["x-forwarded-proto"]:void 0,n="string"==typeof r?r.includes("https"):void 0;if(n)return!0;const o=e.connection?e.connection.encrypted:void 0,c=void 0!==o?!0===o:void 0;return!!c||void 0===n&&void 0===c&&void 0};const o="undefined"!=typeof location?location:{origin:"",pathname:"/"};e.exports=function(e,t){return e?encodeURI("http"+(n(e)?"s":"")+"://"+(e.headers["x-forwarded-host"]||e.headers.host)+(t?e.url:"")):o.origin+(t?o.pathname:"")}},142:function(e,t,r){"use strict";var n={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var r=t.parent,n=t.slots,o=t.props,c=n(),h=c.default;void 0===h&&(h=[]);var l=c.placeholder;return r._isMounted?h:(r.$once("hook:mounted",(function(){r.$forceUpdate()})),o.placeholderTag&&(o.placeholder||l)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||l):h.length>0?h.map((function(){return e(!1)})):e(!1))}};e.exports=n},146:function(e,t,r){"use strict";var n=r(317);function o(e){return null!==e&&"object"===n(e)}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3?arguments[3]:void 0;if(!o(t))return c(e,{},r,n);var h=Object.assign({},t);for(var l in e)if("__proto__"!==l&&"constructor"!==l){var f=e[l];null!=f&&(n&&n(h,l,f,r)||(Array.isArray(f)&&Array.isArray(h[l])?h[l]=h[l].concat(f):o(f)&&o(h[l])?h[l]=c(f,h[l],(r?"".concat(r,"."):"")+l.toString(),n):h[l]=f))}return h}function h(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(p,t){return c(p,t,"",e)}),{})}}r(90),r(13),r(91);var l=h();l.fn=h((function(e,t,r,n){if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0})),l.arrayFn=h((function(e,t,r,n){if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0})),l.extend=h,e.exports=l},214:function(e,t,r){"use strict";function n(e,t){return t=t||{},new Promise((function(r,n){var s=new XMLHttpRequest,o=[],u={},a=function e(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:e,headers:{keys:function(){return o},entries:function(){return o.map((function(e){return[e,s.getResponseHeader(e)]}))},get:function(e){return s.getResponseHeader(e)},has:function(e){return null!=s.getResponseHeader(e)}}}};for(var i in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,(function(e,t){u[t]||o.push(u[t]=t)})),r(a())},s.onerror=n,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(i,t.headers[i]);s.send(t.body||null)}))}r.d(t,"a",(function(){return n}))},216:function(e,t,r){"use strict";var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(e,t){return!1!==t.clone&&t.isMergeableObject(e)?m((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function h(e,source,t){return e.concat(source).map((function(element){return c(element,t)}))}function l(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(symbol){return Object.propertyIsEnumerable.call(e,symbol)})):[]}(e))}function f(object,e){try{return e in object}catch(e){return!1}}function d(e,source,t){var r={};return t.isMergeableObject(e)&&l(e).forEach((function(n){r[n]=c(e[n],t)})),l(source).forEach((function(n){(function(e,t){return f(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,n)||(f(e,n)&&t.isMergeableObject(source[n])?r[n]=function(e,t){if(!t.customMerge)return m;var r=t.customMerge(e);return"function"==typeof r?r:m}(n,t)(e[n],source[n],t):r[n]=c(source[n],t))})),r}function m(e,source,t){(t=t||{}).arrayMerge=t.arrayMerge||h,t.isMergeableObject=t.isMergeableObject||n,t.cloneUnlessOtherwiseSpecified=c;var r=Array.isArray(source);return r===Array.isArray(e)?r?t.arrayMerge(e,source,t):d(e,source,t):c(source,t)}m.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return m(e,r,t)}),{})};var v=m;e.exports=v},217:function(e,t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(1);e.exports=function(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a="object"===("undefined"==typeof document?"undefined":n(document))&&"string"==typeof document.cookie,s="object"===(void 0===t?"undefined":n(t))&&"object"===(void 0===r?"undefined":n(r))&&void 0!==e,u=!a&&!s||a&&s,c=function(e){if(s){var n=t.headers.cookie||"";return e&&(n=(n=r.getHeaders())["set-cookie"]?n["set-cookie"].map((function(e){return e.split(";")[0]})).join(";"):""),n}if(a)return document.cookie||""},h=function(){var e=r.getHeader("Set-Cookie");return(e="string"==typeof e?[e]:e)||[]},p=function(e){return r.setHeader("Set-Cookie",e)},l=function(e,t){if(!t)return e;try{return JSON.parse(e)}catch(t){return e}},f={parseJSON:i,set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};if(!u)if(t="object"===(void 0===t?"undefined":n(t))?JSON.stringify(t):t,s){var i=h();i.push(o.serialize(e,t,r)),p(i)}else document.cookie=o.serialize(e,t,r)},setAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u||Array.isArray(e)&&e.forEach((function(e){var t=e.name,r=void 0===t?"":t,n=e.value,o=void 0===n?"":n,i=e.opts,a=void 0===i?{path:"/"}:i;f.set(r,o,a)}))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromRes:!1,parseJSON:f.parseJSON};if(u)return"";var r=o.parse(c(t.fromRes))[e];return l(r,t.parseJSON)},getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fromRes:!1,parseJSON:f.parseJSON};if(u)return{};var t=o.parse(c(e.fromRes));for(var r in t)t[r]=l(t[r],e.parseJSON);return t},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};u||(t.expires=new Date(0),f.set(e,"",t))},removeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:"/"};if(!u){var t=o.parse(c());for(var r in t)f.remove(r,e)}},nodeCookie:o};return f}},function(e,t,r){"use strict";function i(e,t){try{return t(e)}catch(t){return e}}t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},o=e.split(u),s=n.decode||a,c=0;c<o.length;c++){var h=o[c],p=h.indexOf("=");if(!(p<0)){var l=h.substr(0,p).trim(),f=h.substr(++p,h.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[l]&&(r[l]=i(f,s))}}return r},t.serialize=function(e,t,r){var o=r||{},c=o.encode||s;if("function"!=typeof c)throw new TypeError("option encode is invalid");if(!n.test(e))throw new TypeError("argument name is invalid");var i=c(t);if(i&&!n.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=o.maxAge){var u=o.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(o.domain){if(!n.test(o.domain))throw new TypeError("option domain is invalid");a+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw new TypeError("option path is invalid");a+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(a+="; HttpOnly"),o.secure&&(a+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a};var a=decodeURIComponent,s=encodeURIComponent,u=/; */,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/}])},218:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(16);r(90),r(13),r(91);function o(e){return null!==e&&"object"===Object(n.a)(e)}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3?arguments[3]:void 0;if(!o(t))return c(e,{},r,n);var h=Object.assign({},t);for(var l in e)if("__proto__"!==l&&"constructor"!==l){var f=e[l];null!=f&&(n&&n(h,l,f,r)||(Array.isArray(f)&&Array.isArray(h[l])?h[l]=h[l].concat(f):o(f)&&o(h[l])?h[l]=c(f,h[l],(r?"".concat(r,"."):"")+l.toString(),n):h[l]=f))}return h}function h(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce((function(p,t){return c(p,t,"",e)}),{})}}var l=h();l.fn=h((function(e,t,r,n){if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0})),l.arrayFn=h((function(e,t,r,n){if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0})),l.extend=h},223:function(e,t,r){(function(e){e.installComponents=function(component,e){var r="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(r.components=component.exports.options.components),r.components=r.components||{},e)r.components[i]=r.components[i]||e[i];r.functional&&function(component,e){if(component.exports[t])return;component.exports[t]=!0;var r=component.exports.render;component.exports.render=function(t,n){return r(t,Object.assign({},n,{_c:function(t,a,b){return n._c(e[t]||t,a,b)}}))}}(component,r.components)};var t="_functionalComponents"}).call(this,r(35))},51:function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var content=e(t);return t[2]?"@media ".concat(t[2]," {").concat(content,"}"):content})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var h=0;h<e.length;h++){var l=[].concat(e[h]);n&&o[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},52:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],c=o[0],h={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};n[c]?n[c].parts.push(h):r.push(n[c]={id:c,parts:[h]})}return r}r.r(t),r.d(t,"default",(function(){return x}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),h=null,l=0,f=!1,d=function(){},m=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function x(e,t,r,o){f=r,m=o||{};var h=n(e,t);return S(h),function(t){for(var r=[],i=0;i<h.length;i++){var o=h[i];(l=c[o.id]).refs--,r.push(l)}t?S(h=n(e,t)):h=[];for(i=0;i<r.length;i++){var l;if(0===(l=r[i]).refs){for(var f=0;f<l.parts.length;f++)l.parts[f]();delete c[l.id]}}}}function S(e){for(var i=0;i<e.length;i++){var t=e[i],r=c[t.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](t.parts[n]);for(;n<t.parts.length;n++)r.parts.push(w(t.parts[n]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var o=[];for(n=0;n<t.parts.length;n++)o.push(w(t.parts[n]));c[t.id]={id:t.id,refs:1,parts:o}}}}function k(){var e=document.createElement("style");return e.type="text/css",head.appendChild(e),e}function w(e){var t,r,n=document.querySelector("style["+v+'~="'+e.id+'"]');if(n){if(f)return d;n.parentNode.removeChild(n)}if(y){var o=l++;n=h||(h=k()),t=U.bind(null,n,o,!1),r=U.bind(null,n,o,!0)}else n=k(),t=O.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var E,$=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function U(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=$(t,o);else{var c=document.createTextNode(o),h=e.childNodes;h[t]&&e.removeChild(h[t]),h.length?e.insertBefore(c,h[t]):e.appendChild(c)}}function O(e,t){var r=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),m.ssrId&&e.setAttribute(v,t.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},69:function(e,t,r){"use strict";r.d(t,"a",(function(){return U})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return L})),r.d(t,"d",(function(){return O}));var n=r(121),o=r(71),c=r(145),h=r(146),l=r(95);const f=e=>null==e,d=e=>!f(e),m=(e,a,b)=>x(a,e)===x(b,e);function v(u){return u&&u.length&&new RegExp(["^\\/([a-zA-Z0-9@\\-%_~.:]","[/a-zA-Z0-9@\\-%_~.:]*)?","([?][^#]*)?(#[^#]*)?$"].join("")).test(u)}function y(e,t,r){return e.matched.some((e=>Object.values(e.components).some((component=>component.options&&component.options[t]===r))))}function x(path="",e){let t=path.split("?")[0];return e&&e.base&&(t=t.replace(e.base,"/")),"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t}function S(e){return"string"==typeof e?e:JSON.stringify(e)}function k(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}function w(e,t){if(!t||!e||"object"!=typeof e)return e;if(t in e)return e[t];const r=Array.isArray(t)?t:(t+"").split(".");let n=e;for(;r.length&&n;)n=n[r.shift()];return n}function E(e,t){return e&&t&&"string"==typeof e&&!e.startsWith(t)?t+" "+e:e}class ${constructor(e,t){this.ctx=e,this.options=t,this._initState()}setUniversal(e,t){return f(t)?this.removeUniversal(e):(this.setCookie(e,t),this.setLocalStorage(e,t),this.setState(e,t),t)}getUniversal(e){let t;return f(t)&&(t=this.getCookie(e)),f(t)&&(t=this.getLocalStorage(e)),f(t)&&(t=this.getState(e)),t}syncUniversal(e,t){let r=this.getUniversal(e);return f(r)&&d(t)&&(r=t),d(r)&&this.setUniversal(e,r),r}removeUniversal(e){this.removeState(e),this.removeLocalStorage(e),this.removeCookie(e)}_initState(){if(o.set(this,"_state",{}),this._useVuex=this.options.vuex&&!!this.ctx.store,this._useVuex){const e={namespaced:!0,state:()=>this.options.initialState,mutations:{SET(e,t){o.set(e,t.key,t.value)}}};this.ctx.store.registerModule(this.options.vuex.namespace,e,{preserveState:Boolean(this.ctx.store.state[this.options.vuex.namespace])}),this.state=this.ctx.store.state[this.options.vuex.namespace]}else o.set(this,"state",{}),console.warn("[AUTH] The Vuex Store is not activated. This might cause issues in auth module behavior, like redirects not working properly.To activate it, see https://nuxtjs.org/docs/2.x/directory-structure/store")}setState(e,t){return"_"===e[0]?o.set(this._state,e,t):this._useVuex?this.ctx.store.commit(this.options.vuex.namespace+"/SET",{key:e,value:t}):o.set(this.state,e,t),t}getState(e){return"_"!==e[0]?this.state[e]:this._state[e]}watchState(e,t){if(this._useVuex)return this.ctx.store.watch((t=>w(t[this.options.vuex.namespace],e)),t)}removeState(e){this.setState(e,void 0)}setLocalStorage(e,t){if(f(t))return this.removeLocalStorage(e);if(!this.isLocalStorageEnabled())return;const r=this.getPrefix()+e;try{localStorage.setItem(r,S(t))}catch(e){if(!this.options.ignoreExceptions)throw e}return t}getLocalStorage(e){if(!this.isLocalStorageEnabled())return;const t=this.getPrefix()+e;return k(localStorage.getItem(t))}removeLocalStorage(e){if(!this.isLocalStorageEnabled())return;const t=this.getPrefix()+e;localStorage.removeItem(t)}getCookies(){if(!this.isCookiesEnabled())return;const e=document.cookie;return c.parse(e||"")||{}}setCookie(e,t,r={}){if(!this.options.cookie)return;if(!this.isCookiesEnabled())return;const n=(void 0!==r.prefix?r.prefix:this.options.cookie.prefix)+e,o=Object.assign({},this.options.cookie.options,r),h=S(t);f(t)&&(o.maxAge=-1),"number"==typeof o.expires&&(o.expires=new Date(Date.now()+864e5*o.expires));const l=c.serialize(n,h,o);return document.cookie=l,t}getCookie(e){if(!this.options.cookie)return;if(!this.isCookiesEnabled())return;const t=this.options.cookie.prefix+e,r=this.getCookies();return k(r[t]?decodeURIComponent(r[t]):void 0)}removeCookie(e,t){this.setCookie(e,void 0,t)}getPrefix(){if(!this.options.localStorage)throw new Error("Cannot get prefix; localStorage is off");return this.options.localStorage.prefix}isLocalStorageEnabled(){if(!this.options.localStorage)return!1;const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return this.options.ignoreExceptions||console.warn("[AUTH] Local storage is enabled in config, but browser doesn't support it"),!1}}isCookiesEnabled(){return!!this.options.cookie&&(!!window.navigator.cookieEnabled||(console.warn("[AUTH] Cookies is enabled in config, but browser doesn't support it"),!1))}}class U{constructor(e,t){this.strategies={},this._errorListeners=[],this._redirectListeners=[],this.ctx=e,this.options=t;const r=new $(e,{...t,initialState:{user:null,loggedIn:!1}});this.$storage=r,this.$state=r.state}get state(){return this._stateWarnShown||(this._stateWarnShown=!0,console.warn("[AUTH] $auth.state is deprecated. Please use $auth.$state or top level props like $auth.loggedIn")),this.$state}get strategy(){return this.getStrategy()}getStrategy(e=!0){if(e){if(!this.$state.strategy)throw new Error("No strategy is set!");if(!this.strategies[this.$state.strategy])throw new Error("Strategy not supported: "+this.$state.strategy)}return this.strategies[this.$state.strategy]}get user(){return this.$state.user}get loggedIn(){return this.$state.loggedIn}get busy(){return this.$storage.getState("busy")}async init(){if(this.options.resetOnError&&this.onError(((...e)=>{("function"!=typeof this.options.resetOnError||this.options.resetOnError(...e))&&this.reset()})),this.$storage.syncUniversal("strategy",this.options.defaultStrategy),!this.getStrategy(!1)&&(this.$storage.setUniversal("strategy",this.options.defaultStrategy),!this.getStrategy(!1)))return Promise.resolve();try{await this.mounted()}catch(e){this.callOnError(e)}finally{this.options.watchLoggedIn&&this.$storage.watchState("loggedIn",(e=>{y(this.ctx.route,"auth",!1)||this.redirect(e?"home":"logout")}))}}getState(e){return this._getStateWarnShown||(this._getStateWarnShown=!0,console.warn("[AUTH] $auth.getState is deprecated. Please use $auth.$storage.getState() or top level props like $auth.loggedIn")),this.$storage.getState(e)}registerStrategy(e,t){this.strategies[e]=t}setStrategy(e){if(e===this.$storage.getUniversal("strategy"))return Promise.resolve();if(!this.strategies[e])throw new Error(`Strategy ${e} is not defined!`);return this.reset(),this.$storage.setUniversal("strategy",e),this.mounted()}mounted(...e){return this.getStrategy().mounted?Promise.resolve(this.getStrategy().mounted(...e)).catch((e=>(this.callOnError(e,{method:"mounted"}),Promise.reject(e)))):this.fetchUserOnce()}loginWith(e,...t){return this.setStrategy(e).then((()=>this.login(...t)))}login(...e){return this.getStrategy().login?this.wrapLogin(this.getStrategy().login(...e)).catch((e=>(this.callOnError(e,{method:"login"}),Promise.reject(e)))):Promise.resolve()}fetchUser(...e){return this.getStrategy().fetchUser?Promise.resolve(this.getStrategy().fetchUser(...e)).catch((e=>(this.callOnError(e,{method:"fetchUser"}),Promise.reject(e)))):Promise.resolve()}logout(...e){return this.getStrategy().logout?Promise.resolve(this.getStrategy().logout(...e)).catch((e=>(this.callOnError(e,{method:"logout"}),Promise.reject(e)))):(this.reset(),Promise.resolve())}setUserToken(e,t){return this.getStrategy().setUserToken?Promise.resolve(this.getStrategy().setUserToken(e,t)).catch((e=>(this.callOnError(e,{method:"setUserToken"}),Promise.reject(e)))):(this.getStrategy().token.set(e),Promise.resolve())}reset(...e){return this.getStrategy().reset||(this.setUser(!1),this.getStrategy().token.reset(),this.getStrategy().refreshToken.reset()),this.getStrategy().reset(...e)}refreshTokens(){return this.getStrategy().refreshController?Promise.resolve(this.getStrategy().refreshController.handleRefresh()).catch((e=>(this.callOnError(e,{method:"refreshTokens"}),Promise.reject(e)))):Promise.resolve()}check(...e){return this.getStrategy().check?this.getStrategy().check(...e):{valid:!0}}fetchUserOnce(...e){return this.$state.user?Promise.resolve():this.fetchUser(...e)}setUser(e){this.$storage.setState("user",e);let t={valid:Boolean(e)};t.valid&&(t=this.check()),this.$storage.setState("loggedIn",t.valid)}request(e,t={}){const r="object"==typeof t?Object.assign({},t,e):e;if(""===r.baseURL&&(r.baseURL=n(this.ctx.req)),this.ctx.app.$axios)return this.ctx.app.$axios.request(r).catch((e=>(this.callOnError(e,{method:"request"}),Promise.reject(e))));console.error("[AUTH] add the @nuxtjs/axios module to nuxt.config file")}requestWith(e,t,r){const n=this.getStrategy().token.get(),o=Object.assign({},r,t),c=this.strategies[e].options.token.name||"Authorization";return o.headers||(o.headers={}),!o.headers[c]&&d(n)&&n&&"string"==typeof n&&(o.headers[c]=n),this.request(o)}wrapLogin(e){return this.$storage.setState("busy",!0),this.error=null,Promise.resolve(e).then((e=>(this.$storage.setState("busy",!1),e))).catch((e=>(this.$storage.setState("busy",!1),Promise.reject(e))))}onError(e){this._errorListeners.push(e)}callOnError(e,t={}){this.error=e;for(const r of this._errorListeners)r(e,t)}redirect(e,t=!1){if(!this.options.redirect)return;const r=this.options.fullPathRedirect?this.ctx.route.fullPath:this.ctx.route.path;let n=this.options.redirect[e];if(n){if(this.options.rewriteRedirects&&("login"===e&&v(r)&&!m(this.ctx,n,r)&&this.$storage.setUniversal("redirect",r),"home"===e)){const e=this.$storage.getUniversal("redirect");this.$storage.setUniversal("redirect",null),v(e)&&(n=e)}n=this.callOnRedirect(n,r)||n,m(this.ctx,n,r)||(t?(v(n)&&!n.includes(this.ctx.base)&&(n=x("/"+this.ctx.base+"/"+n)),window.location.replace(n)):this.ctx.redirect(n,this.ctx.query))}}onRedirect(e){this._redirectListeners.push(e)}callOnRedirect(e,t){for(const r of this._redirectListeners)e=r(e,t)||e;return e}hasScope(e){const t=this.$state.user&&w(this.$state.user,this.options.scopeKey);return!!t&&(Array.isArray(t)?t.includes(e):Boolean(w(t,e)))}}const O=async e=>{if(y(e.route,"auth",!1))return;const t=function(e,t=[]){return[].concat(...e.matched.map((function(e,r){return Object.keys(e.components).map((function(n){return t.push(r),e.components[n]}))})))}(e.route,[]);if(!t.length)return;const{login:r,callback:n}=e.$auth.options.redirect,o=y(e.route,"auth","guest"),c=t=>x(e.route.path,e)===x(t,e);if(e.$auth.$state.loggedIn){const{tokenExpired:t,refreshTokenExpired:n,isRefreshable:h}=e.$auth.check(!0);if((!r||c(r)||o)&&e.$auth.redirect("home"),n)e.$auth.reset();else if(t)if(h)try{await e.$auth.refreshTokens()}catch(t){e.$auth.reset()}else e.$auth.reset()}else o||n&&c(n)||e.$auth.redirect("login")};class _ extends Error{constructor(){super("Error loading OpenIDConnect configuration document"),this.name="ConfigurationDocumentRequestError"}}class T extends Error{constructor(){super("Both token and refresh token have expired. Your request was aborted."),this.name="ExpiredAuthSessionError"}}var A,j;(j=A||(A={})).UNKNOWN="UNKNOWN",j.VALID="VALID",j.EXPIRED="EXPIRED";class C{constructor(e,t){this._status=this._calculate(e,t)}unknown(){return A.UNKNOWN===this._status}valid(){return A.VALID===this._status}expired(){return A.EXPIRED===this._status}_calculate(e,t){const r=Date.now();try{if(!e||!t)return A.UNKNOWN}catch(e){return A.UNKNOWN}return r<(t-=500)?A.VALID:A.EXPIRED}}class P{constructor(e,t){this.scheme=e,this.axios=t,this.interceptor=null}setHeader(e){this.scheme.options.token.global&&this.axios.setHeader(this.scheme.options.token.name,e)}clearHeader(){this.scheme.options.token.global&&this.axios.setHeader(this.scheme.options.token.name,!1)}initializeRequestInterceptor(e){this.interceptor=this.axios.interceptors.request.use((async t=>{if(!this._needToken(t)||t.url===e)return t;const{valid:r,tokenExpired:n,refreshTokenExpired:o,isRefreshable:c}=this.scheme.check(!0);let h=r;if(o)throw this.scheme.reset(),new T;if(n){if(!c)throw this.scheme.reset(),new T;h=await this.scheme.refreshTokens().then((()=>!0)).catch((()=>{throw this.scheme.reset(),new T}))}const l=this.scheme.token.get();if(!h){if(!l&&this._requestHasAuthorizationHeader(t))throw new T;return t}return this._getUpdatedRequestConfig(t,l)}))}reset(){this.axios.interceptors.request.eject(this.interceptor),this.interceptor=null}_needToken(e){const t=this.scheme.options;return t.token.global||Object.values(t.endpoints).some((t=>"object"==typeof t?t.url===e.url:t===e.url))}_getUpdatedRequestConfig(e,t){return"string"==typeof t&&(e.headers[this.scheme.options.token.name]=t),e}_requestHasAuthorizationHeader(e){return!!e.headers.common[this.scheme.options.token.name]}}class I{constructor(e,t){this.scheme=e,this.$storage=t}get(){const e=this.scheme.options.token.prefix+this.scheme.name;return this.$storage.getUniversal(e)}set(e){const t=E(e,this.scheme.options.token.type);return this._setToken(t),this._updateExpiration(t),"string"==typeof t&&this.scheme.requestHandler.setHeader(t),t}sync(){const e=this._syncToken();return this._syncExpiration(),"string"==typeof e&&this.scheme.requestHandler.setHeader(e),e}reset(){this.scheme.requestHandler.clearHeader(),this._setToken(!1),this._setExpiration(!1)}status(){return new C(this.get(),this._getExpiration())}_getExpiration(){const e=this.scheme.options.token.expirationPrefix+this.scheme.name;return this.$storage.getUniversal(e)}_setExpiration(e){const t=this.scheme.options.token.expirationPrefix+this.scheme.name;return this.$storage.setUniversal(t,e)}_syncExpiration(){const e=this.scheme.options.token.expirationPrefix+this.scheme.name;return this.$storage.syncUniversal(e)}_updateExpiration(e){let t;const r=Date.now(),n=1e3*Number(this.scheme.options.token.maxAge),o=n?r+n:0;try{t=1e3*l(e+"").exp||o}catch(e){if(t=o,!e||"InvalidTokenError"!==e.name)throw e}return this._setExpiration(t||!1)}_setToken(e){const t=this.scheme.options.token.prefix+this.scheme.name;return this.$storage.setUniversal(t,e)}_syncToken(){const e=this.scheme.options.token.prefix+this.scheme.name;return this.$storage.syncUniversal(e)}}class R{constructor(e,...t){this.$auth=e,this.options=t.reduce(((p,e)=>h(p,e)),{})}get name(){return this.options.name}}const N={name:"local",endpoints:{login:{url:"/api/auth/login",method:"post"},logout:{url:"/api/auth/logout",method:"post"},user:{url:"/api/auth/user",method:"get"}},token:{property:"token",type:"Bearer",name:"Authorization",maxAge:1800,global:!0,required:!0,prefix:"_token.",expirationPrefix:"_token_expiration."},user:{property:"user",autoFetch:!0},clientId:!1,grantType:!1,scope:!1};class L extends R{constructor(e,t,...r){super(e,t,...r,N),this.token=new I(this,this.$auth.$storage),this.requestHandler=new P(this,this.$auth.ctx.$axios)}check(e=!1){const t={valid:!1,tokenExpired:!1};if(!this.token.sync())return t;if(!e)return t.valid=!0,t;return this.token.status().expired()?(t.tokenExpired=!0,t):(t.valid=!0,t)}mounted({tokenCallback:e=(()=>this.$auth.reset()),refreshTokenCallback:t}={}){const{tokenExpired:r,refreshTokenExpired:n}=this.check(!0);return n&&"function"==typeof t?t():r&&"function"==typeof e&&e(),this.initializeRequestInterceptor(),this.$auth.fetchUserOnce()}async login(e,{reset:t=!0}={}){if(!this.options.endpoints.login)return;t&&this.$auth.reset({resetInterceptor:!1}),this.options.clientId&&(e.data.client_id=this.options.clientId),this.options.grantType&&(e.data.grant_type=this.options.grantType),this.options.scope&&(e.data.scope=this.options.scope);const r=await this.$auth.request(e,this.options.endpoints.login);return this.updateTokens(r),this.requestHandler.interceptor||this.initializeRequestInterceptor(),this.options.user.autoFetch&&await this.fetchUser(),r}setUserToken(e){return this.token.set(e),this.fetchUser()}fetchUser(e){return this.check().valid?this.options.endpoints.user?this.$auth.requestWith(this.name,e,this.options.endpoints.user).then((e=>{const t=w(e.data,this.options.user.property);if(!t){const e=new Error(`User Data response does not contain field ${this.options.user.property}`);return Promise.reject(e)}return this.$auth.setUser(t),e})).catch((e=>(this.$auth.callOnError(e,{method:"fetchUser"}),Promise.reject(e)))):(this.$auth.setUser({}),Promise.resolve()):Promise.resolve()}async logout(e={}){return this.options.endpoints.logout&&await this.$auth.requestWith(this.name,e,this.options.endpoints.logout).catch((()=>{})),this.$auth.reset()}reset({resetInterceptor:e=!0}={}){this.$auth.setUser(!1),this.token.reset(),e&&this.requestHandler.reset()}updateTokens(e){const t=!this.options.token.required||w(e.data,this.options.token.property);this.token.set(t)}initializeRequestInterceptor(){this.requestHandler.initializeRequestInterceptor()}}},70:function(e,t,r){"use strict";var n={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var r=t.parent,n=t.slots,o=t.props,c=n(),h=c.default;void 0===h&&(h=[]);var l=c.placeholder;return r._isMounted?h:(r.$once("hook:mounted",(function(){r.$forceUpdate()})),o.placeholderTag&&(o.placeholder||l)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||l):h.length>0?h.map((function(){return e(!1)})):e(!1))}};e.exports=n},72:function(e,t,r){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},95:function(e,t,r){"use strict";function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var o="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,i=0,c="";o=t.charAt(i++);~o&&(r=a%4?64*r+o:o,a++%4)?c+=String.fromCharCode(255&r>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return c};function c(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(o(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return o(t)}}function h(e){this.message=e}function l(e,t){if("string"!=typeof e)throw new h("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(c(e.split(".")[r]))}catch(e){throw new h("Invalid token specified: "+e.message)}}h.prototype=new Error,h.prototype.name="InvalidTokenError";const a=l;a.default=l,a.InvalidTokenError=h,e.exports=a}}]);